{% extends 'dashboard/base_dashboard.html' %}
{% load static %}
{% block content %}
    <div class="w-full h-full overflow-hidden">
        <div class="flex-1 flex flex-col h-full">
            <div class="flex flex-col w-full gap-1 md:gap-2 mb-2 px-6 pt-4 md:px-8 md:pt-6">
                <div class="w-full text-xs flex flex-row flex-nowrap gap-1 items-center">
                    <a href="{% url 'dashboard:events' %}" class="text-[#a1c617] hover:underline">Évènements</a>
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                         stroke="currentColor" stroke-width="0.75" stroke-linecap="round" stroke-linejoin="round"
                         class="lucide lucide-chevron-right">
                        <path d="m9 18 6-6-6-6"/>
                    </svg>
                    <span class="overflow-ellipsis">{{ event.title }}</span>
                </div>
                <div id="tab-bar" class="relative w-full flex flex-row flex-nowrap items-center text-sm border-b">
                    <div id="generalTabBtn" class="px-2 py-1 rounded hover:bg-[#f5fccb] cursor-pointer">Général</div>
                    <div id="statsTabBtn" class="px-2 py-1 rounded hover:bg-[#f5fccb] cursor-pointer">Stats</div>
                    <div id="slider" class="absolute h-[2px] bottom-[-1px] bg-[#a1c617] transition-all ease-in-out duration-300"></div>
                </div>
            </div>
            <div class="h-full overflow-hidden">
                <div class="h-full overflow-y-auto px-6 pb-6 md:px-8 md:pb-8">
                    {# general tab #}
                    <div id="generalTab" class="w-full">
                    </div>
                    {# stats tab #}
                    <div id="statsTab" class="hidden w-full">
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% include 'components/new_event_form_modal.html' %}
{% endblock %}
{% block script_tags %}
    <script>
       document.addEventListener("DOMContentLoaded", () => {
          const generalTabBtn = document.getElementById("generalTabBtn");
          const statsTabBtn = document.getElementById("statsTabBtn");
          const generalTab = document.getElementById("generalTab");
          const statsTab = document.getElementById("statsTab");
          const slider = document.getElementById("slider");

          function updateSlider(button) {
             slider.style.width = `${button.offsetWidth}px`;
             slider.style.left = `${button.offsetLeft}px`;
          }

          updateSlider(generalTabBtn);
          statsTab.style.display = "none";

          generalTabBtn.addEventListener("click", () => {
             generalTab.style.display = "block";
             statsTab.style.display = "none";
             generalTabBtn.classList.add("active");
             statsTabBtn.classList.remove("active");
             updateSlider(generalTabBtn);
          });

          statsTabBtn.addEventListener("click", () => {
             generalTab.style.display = "none";
             statsTab.style.display = "block";
             statsTabBtn.classList.add("active");
             generalTabBtn.classList.remove("active");
             updateSlider(statsTabBtn);
          });
       });
    </script>
    <script src="{% static 'js/src/filter.js' %}" defer></script>
{% endblock %}